(function(){function m(l,b){for(var g=0;g<b.length;g+=1)if(b[g]===l)return!0;return!1}function H(l){return l.replace(/^\s+|\s+$/g,"")}function A(l,b){return(new r(l,b)).beautify()}function r(l,b){function n(c,a){var e=0;return c&&(e=c.indentation_level,!f.just_added_newline()&&c.line_indent_level>e&&(e=c.line_indent_level)),{mode:a,parent:c,last_text:c?c.last_text:"",last_word:c?c.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,if_block:!1,else_block:!1,do_block:!1,
do_while:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:e,line_indent_level:c?c.line_indent_level:e,start_line_index:f.get_line_number(),ternary_depth:0}}function q(f){var a=f.newlines,e;if(p.keep_array_indentation&&c.mode===g.ArrayLiteral)for(e=0;e<a;e+=1)u(0<e);else if(p.max_preserve_newlines&&a>p.max_preserve_newlines&&(a=p.max_preserve_newlines),p.preserve_newlines&&1<f.newlines)for(u(),e=1;e<a;e+=1)u(!0);h=f;A[h.type]()}function G(c){(c=void 0===c?!1:c,f.just_added_newline())||
(p.preserve_newlines&&h.wanted_newline||c?u(!1,!0):p.wrap_line_length&&f.current_line.get_character_count()+h.text.length+(f.space_before_token?1:0)>=p.wrap_line_length&&u(!1,!0))}function u(a,e){if(!e&&";"!==c.last_text&&","!==c.last_text&&"\x3d"!==c.last_text&&"TK_OPERATOR"!==k)for(;c.mode===g.Statement&&!c.if_block&&!c.do_block;)y();f.add_new_line(a)&&(c.multiline_frame=!0)}function v(a){a=a||h.text;if(f.just_added_newline())if(p.keep_array_indentation&&c.mode===g.ArrayLiteral&&h.wanted_newline){f.current_line.push("");
for(var e=0;e<h.whitespace_before.length;e+=1)f.current_line.push(h.whitespace_before[e]);f.space_before_token=!1}else f.add_indent_string(c.indentation_level)&&(c.line_indent_level=c.indentation_level);f.add_token(a)}function r(a){c?(K.push(c),F=c):F=n(null,a);c=n(F,a)}function B(c){return m(c,[g.Expression,g.ForInitializer,g.Conditional])}function y(){0<K.length&&(F=c,c=K.pop(),F.mode===g.Statement&&f.remove_redundant_indentation(F))}function D(){return c.parent.mode===g.ObjectLiteral&&c.mode===
g.Statement&&(":"===c.last_text&&0===c.ternary_depth||"TK_RESERVED"===k&&m(c.last_text,["get","set"]))}function z(){var a;"TK_RESERVED"===k&&m(c.last_text,["var","let","const"])&&"TK_WORD"===h.type||"TK_RESERVED"===k&&"do"===c.last_text||"TK_RESERVED"===k&&"return"===c.last_text&&!h.wanted_newline||"TK_RESERVED"===k&&"else"===c.last_text&&("TK_RESERVED"!==h.type||"if"!==h.text)||"TK_END_EXPR"===k&&(F.mode===g.ForInitializer||F.mode===g.Conditional)||"TK_WORD"===k&&c.mode===g.BlockStatement&&!c.in_case&&
"--"!==h.text&&"++"!==h.text&&"TK_WORD"!==h.type&&"TK_RESERVED"!==h.type||c.mode===g.ObjectLiteral&&(":"===c.last_text&&0===c.ternary_depth||"TK_RESERVED"===k&&m(c.last_text,["get","set"]))?(r(g.Statement),c.indentation_level+=1,a=("TK_RESERVED"===k&&m(c.last_text,["var","let","const"])&&"TK_WORD"===h.type&&(c.declaration_statement=!0),D()||G("TK_RESERVED"===h.type&&m(h.text,["do","for","if","while"])),!0)):a=!1;return a}function d(c){return m(c,"case return do if throw else".split(" "))}function w(c){c=
t+(c||0);return 0>c||c>=a.length?null:a[c]}function e(){var a,e;if("TK_RESERVED"===h.type&&c.mode!==g.ObjectLiteral&&m(h.text,["set","get"])&&(h.type="TK_WORD"),"TK_RESERVED"===h.type&&c.mode===g.ObjectLiteral&&(a=w(1),":"==a.text&&(h.type="TK_WORD")),z()||!h.wanted_newline||B(c.mode)||"TK_OPERATOR"===k&&"--"!==c.last_text&&"++"!==c.last_text||"TK_EQUALS"===k||!p.preserve_newlines&&"TK_RESERVED"===k&&m(c.last_text,["var","let","const","set","get"])||u(),c.do_block&&!c.do_while){if("TK_RESERVED"===
h.type&&"while"===h.text){f.space_before_token=!0;v();f.space_before_token=!0;c.do_while=!0;return}u();c.do_block=!1}if(c.if_block)if(c.else_block||"TK_RESERVED"!==h.type||"else"!==h.text){for(;c.mode===g.Statement;)y();c.if_block=!1;c.else_block=!1}else c.else_block=!0;if("TK_RESERVED"===h.type&&("case"===h.text||"default"===h.text&&c.in_case_statement)){u();if(c.case_body||p.jslint_happy)0<c.indentation_level&&(!c.parent||c.indentation_level>c.parent.indentation_level)&&--c.indentation_level,c.case_body=
!1;v();c.in_case=!0;c.in_case_statement=!0}else("TK_RESERVED"===h.type&&"function"===h.text&&((m(c.last_text,["}",";"])||f.just_added_newline()&&!m(c.last_text,["[","{",":","\x3d",","]))&&(f.just_added_blankline()||h.comments_before.length||(u(),u(!0))),"TK_RESERVED"===k||"TK_WORD"===k?"TK_RESERVED"===k&&m(c.last_text,["get","set","new","return","export"])?f.space_before_token=!0:"TK_RESERVED"===k&&"default"===c.last_text&&"export"===x?f.space_before_token=!0:u():"TK_OPERATOR"===k||"\x3d"===c.last_text?
f.space_before_token=!0:!c.multiline_frame&&(B(c.mode)||c.mode===g.ArrayLiteral)||u()),("TK_COMMA"===k||"TK_START_EXPR"===k||"TK_EQUALS"===k||"TK_OPERATOR"===k)&&(D()||G()),"TK_RESERVED"===h.type&&m(h.text,["function","get","set"]))?(v(),c.last_word=h.text):(E="NONE","TK_END_BLOCK"===k?"TK_RESERVED"===h.type&&m(h.text,["else","catch","finally"])?"expand"===p.brace_style||"end-expand"===p.brace_style?E="NEWLINE":(E="SPACE",f.space_before_token=!0):E="NEWLINE":"TK_SEMICOLON"===k&&c.mode===g.BlockStatement?
E="NEWLINE":"TK_SEMICOLON"===k&&B(c.mode)?E="SPACE":"TK_STRING"===k?E="NEWLINE":"TK_RESERVED"===k||"TK_WORD"===k||"*"===c.last_text&&"function"===x?E="SPACE":"TK_START_BLOCK"===k?E="NEWLINE":"TK_END_EXPR"===k&&(f.space_before_token=!0,E="NEWLINE"),"TK_RESERVED"===h.type&&m(h.text,I.line_starters)&&")"!==c.last_text&&(E="else"===c.last_text||"export"===c.last_text?"SPACE":"NEWLINE"),"TK_RESERVED"===h.type&&m(h.text,["else","catch","finally"])?"TK_END_BLOCK"!==k||"expand"===p.brace_style||"end-expand"===
p.brace_style?u():(f.trim(!0),e=f.current_line,"}"!==e.last()&&u(),f.space_before_token=!0):"NEWLINE"===E?"TK_RESERVED"===k&&d(c.last_text)?f.space_before_token=!0:"TK_END_EXPR"!==k?"TK_START_EXPR"===k&&"TK_RESERVED"===h.type&&m(h.text,["var","let","const"])||":"===c.last_text||("TK_RESERVED"===h.type&&"if"===h.text&&"else"===c.last_text?f.space_before_token=!0:u()):"TK_RESERVED"===h.type&&m(h.text,I.line_starters)&&")"!==c.last_text&&u():c.multiline_frame&&c.mode===g.ArrayLiteral&&","===c.last_text&&
"}"===x?u():"SPACE"===E&&(f.space_before_token=!0),v(),c.last_word=h.text,"TK_RESERVED"===h.type&&"do"===h.text&&(c.do_block=!0),"TK_RESERVED"===h.type&&"if"===h.text&&(c.if_block=!0))}var f,a=[],t,I,h,k,x,C,c,F,K,E,A,p,M="",J;A={TK_START_EXPR:function(){z();var a=g.Expression;if("["===h.text){if("TK_WORD"===k||")"===c.last_text){"TK_RESERVED"===k&&m(c.last_text,I.line_starters)&&(f.space_before_token=!0);r(a);v();c.indentation_level+=1;p.space_in_paren&&(f.space_before_token=!0);return}a=g.ArrayLiteral;
c.mode!==g.ArrayLiteral||"["!==c.last_text&&(","!==c.last_text||"]"!==x&&"}"!==x)||!p.keep_array_indentation&&u()}else"TK_RESERVED"===k&&"for"===c.last_text?a=g.ForInitializer:"TK_RESERVED"===k&&m(c.last_text,["if","while"])&&(a=g.Conditional);";"===c.last_text||"TK_START_BLOCK"===k?u():"TK_END_EXPR"===k||"TK_START_EXPR"===k||"TK_END_BLOCK"===k||"."===c.last_text?G(h.wanted_newline):"TK_RESERVED"===k&&"("===h.text||"TK_WORD"===k||"TK_OPERATOR"===k?"TK_RESERVED"===k&&("function"===c.last_word||"typeof"===
c.last_word)||"*"===c.last_text&&"function"===x?p.space_after_anon_function&&(f.space_before_token=!0):"TK_RESERVED"===k&&(m(c.last_text,I.line_starters)||"catch"===c.last_text)&&p.space_before_conditional&&(f.space_before_token=!0):f.space_before_token=!0;"("!==h.text||"TK_EQUALS"!==k&&"TK_OPERATOR"!==k||!D()&&G();r(a);v();p.space_in_paren&&(f.space_before_token=!0);c.indentation_level+=1},TK_END_EXPR:function(){for(;c.mode===g.Statement;)y();c.multiline_frame&&G("]"===h.text&&c.mode===g.ArrayLiteral&&
!p.keep_array_indentation);p.space_in_paren&&("TK_START_EXPR"!==k||p.space_in_empty_paren?f.space_before_token=!0:(f.trim(),f.space_before_token=!1));"]"===h.text&&p.keep_array_indentation?(v(),y()):(y(),v());f.remove_redundant_indentation(F);c.do_while&&F.mode===g.Conditional&&(F.mode=g.Expression,c.do_block=!1,c.do_while=!1)},TK_START_BLOCK:function(){var a=w(1),e=w(2);e&&(":"===e.text&&m(a.type,["TK_STRING","TK_WORD","TK_RESERVED"])||m(a.text,["get","set"])&&m(e.type,["TK_WORD","TK_RESERVED"]))?
m(x,["class","interface"])?r(g.BlockStatement):r(g.ObjectLiteral):r(g.BlockStatement);a=!a.comments_before.length&&"}"===a.text&&"function"===c.last_word&&"TK_END_EXPR"===k;"expand"===p.brace_style?"TK_OPERATOR"!==k&&(a||"TK_EQUALS"===k||"TK_RESERVED"===k&&d(c.last_text)&&"else"!==c.last_text)?f.space_before_token=!0:u(!1,!0):"TK_OPERATOR"!==k&&"TK_START_EXPR"!==k?"TK_START_BLOCK"===k?u():f.space_before_token=!0:F.mode===g.ArrayLiteral&&","===c.last_text&&("}"===x?f.space_before_token=!0:u());v();
c.indentation_level+=1},TK_END_BLOCK:function(){for(;c.mode===g.Statement;)y();var a="TK_START_BLOCK"===k;"expand"===p.brace_style?a||u():a||(c.mode===g.ArrayLiteral&&p.keep_array_indentation?(p.keep_array_indentation=!1,u(),p.keep_array_indentation=!0):u());y();v()},TK_WORD:e,TK_RESERVED:e,TK_SEMICOLON:function(){for(z()&&(f.space_before_token=!1);c.mode===g.Statement&&!c.if_block&&!c.do_block;)y();v()},TK_STRING:function(){z()?f.space_before_token=!0:"TK_RESERVED"===k||"TK_WORD"===k?f.space_before_token=
!0:"TK_COMMA"===k||"TK_START_EXPR"===k||"TK_EQUALS"===k||"TK_OPERATOR"===k?D()||G():u();v()},TK_EQUALS:function(){z();c.declaration_statement&&(c.declaration_assignment=!0);f.space_before_token=!0;v();f.space_before_token=!0},TK_OPERATOR:function(){if(z(),"TK_RESERVED"===k&&d(c.last_text))f.space_before_token=!0,v();else if("*"===h.text&&"TK_DOT"===k)v();else if(":"===h.text&&c.in_case)c.case_body=!0,c.indentation_level+=1,v(),u(),c.in_case=!1;else if("::"===h.text)v();else{h.wanted_newline&&("--"===
h.text||"++"===h.text)&&u(!1,!0);"TK_OPERATOR"===k&&G();var a=!0,e=!0;m(h.text,["--","++","!","~"])||m(h.text,["-","+"])&&(m(k,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||m(c.last_text,I.line_starters)||","===c.last_text)?(a=!1,e=!1,";"===c.last_text&&B(c.mode)&&(a=!0),"TK_RESERVED"===k||"TK_END_EXPR"===k?a=!0:"TK_OPERATOR"===k&&(a=m(h.text,["--","-"])&&m(c.last_text,["--","-"])||m(h.text,["++","+"])&&m(c.last_text,["++","+"])),!(c.mode!==g.BlockStatement&&c.mode!==g.Statement||
"{"!==c.last_text&&";"!==c.last_text)&&u()):":"===h.text?0===c.ternary_depth?a=!1:--c.ternary_depth:"?"===h.text?c.ternary_depth+=1:"*"===h.text&&"TK_RESERVED"===k&&"function"===c.last_text&&(a=!1,e=!1);f.space_before_token=f.space_before_token||a;v();f.space_before_token=e}},TK_COMMA:function(){c.declaration_statement?(B(c.parent.mode)&&(c.declaration_assignment=!1),v(),c.declaration_assignment?(c.declaration_assignment=!1,u(!1,!0)):f.space_before_token=!0):(v(),c.mode===g.ObjectLiteral||c.mode===
g.Statement&&c.parent.mode===g.ObjectLiteral?(c.mode===g.Statement&&y(),u()):f.space_before_token=!0)},TK_BLOCK_COMMENT:function(){var a;a=h.text;a=a.replace(/\x0d/g,"");for(var c=[],e=a.indexOf("\n");-1!==e;)c.push(a.substring(0,e)),a=a.substring(e+1),e=a.indexOf("\n");a=(a.length&&c.push(a),c);var d,e=c=!1,b=h.whitespace_before.join(""),k=b.length;u(!1,!0);if(1<a.length){var l;a:{for(var t=a.slice(1),q=0;q<t.length;q++)if(l=H(t[q]),"*"!==l.charAt(0)){l=!1;break a}l=!0}if(l)c=!0;else{a:{l=a.slice(1);
t=0;for(q=l.length;t<q;t++)if(d=l[t],d&&0!==d.indexOf(b)){d=!1;break a}d=!0}d&&(e=!0)}}v(a[0]);for(d=1;d<a.length;d++)u(!1,!0),c?v(" "+H(a[d])):e&&a[d].length>k?v(a[d].substring(k)):f.add_token(a[d]);u(!1,!0)},TK_INLINE_COMMENT:function(){f.space_before_token=!0;v();f.space_before_token=!0},TK_COMMENT:function(){h.wanted_newline?u(!1,!0):f.trim(!0);f.space_before_token=!0;v();u(!1,!0)},TK_DOT:function(){z();"TK_RESERVED"===k&&d(c.last_text)?f.space_before_token=!0:G(")"===c.last_text&&p.break_chained_methods);
v()},TK_UNKNOWN:function(){v();"\n"===h.text[h.text.length-1]&&u()},TK_EOF:function(){for(;c.mode===g.Statement;)y()}};b=b?b:{};p={};void 0!==b.braces_on_own_line&&(p.brace_style=b.braces_on_own_line?"expand":"collapse");p.brace_style=b.brace_style?b.brace_style:p.brace_style?p.brace_style:"collapse";"expand-strict"===p.brace_style&&(p.brace_style="expand");p.indent_size=b.indent_size?parseInt(b.indent_size,10):4;p.indent_char=b.indent_char?b.indent_char:" ";p.preserve_newlines=void 0===b.preserve_newlines?
!0:b.preserve_newlines;p.break_chained_methods=void 0===b.break_chained_methods?!1:b.break_chained_methods;p.max_preserve_newlines=void 0===b.max_preserve_newlines?0:parseInt(b.max_preserve_newlines,10);p.space_in_paren=void 0===b.space_in_paren?!1:b.space_in_paren;p.space_in_empty_paren=void 0===b.space_in_empty_paren?!1:b.space_in_empty_paren;p.jslint_happy=void 0===b.jslint_happy?!1:b.jslint_happy;p.space_after_anon_function=void 0===b.space_after_anon_function?!1:b.space_after_anon_function;p.keep_array_indentation=
void 0===b.keep_array_indentation?!1:b.keep_array_indentation;p.space_before_conditional=void 0===b.space_before_conditional?!0:b.space_before_conditional;p.unescape_strings=void 0===b.unescape_strings?!1:b.unescape_strings;p.wrap_line_length=void 0===b.wrap_line_length?0:parseInt(b.wrap_line_length,10);p.e4x=void 0===b.e4x?!1:b.e4x;p.end_with_newline=void 0===b.end_with_newline?!1:b.end_with_newline;p.jslint_happy&&(p.space_after_anon_function=!0);b.indent_with_tabs&&(p.indent_char="\t",p.indent_size=
1);for(C="";0<p.indent_size;)C+=p.indent_char,--p.indent_size;if(J=0,l&&l.length){for(;" "===l.charAt(J)||"\t"===l.charAt(J);)M+=l.charAt(J),J+=1;l=l.substring(J)}k="TK_START_BLOCK";x="";f=new N(C,M);K=[];r(g.BlockStatement);this.beautify=function(){var e,d,h;I=new L(l,p,C);a=I.tokenize();for(t=0;e=w();){for(h=0;h<e.comments_before.length;h++)q(e.comments_before[h]);q(e);x=c.last_text;k=e.type;c.last_text=e.text;t+=1}return d=f.get_code(),p.end_with_newline&&(d+="\n"),d}}function n(){var b=0,g=[];
this.get_character_count=function(){return b};this.get_item_count=function(){return g.length};this.get_output=function(){return g.join("")};this.last=function(){return g.length?g[g.length-1]:null};this.push=function(m){g.push(m);b+=m.length};this.remove_indent=function(m,q){var n=0;0!==g.length&&(q&&g[0]===q&&(n=1),g[n]===m&&(b-=g[n].length,g.splice(n,1)))};this.trim=function(m,q){for(;this.get_item_count()&&(" "===this.last()||this.last()===m||this.last()===q);){var n=g.pop();b-=n.length}}}function N(b,
m){var r=[];this.baseIndentString=m;this.current_line=null;this.space_before_token=!1;this.get_line_number=function(){return r.length};this.add_new_line=function(b){return 1===this.get_line_number()&&this.just_added_newline()?!1:b||!this.just_added_newline()?(this.current_line=new n,r.push(this.current_line),!0):!1};this.add_new_line(!0);this.get_code=function(){for(var b=r[0].get_output(),l=1;l<r.length;l++)b+="\n"+r[l].get_output();return b.replace(/[\r\n\t ]+$/,"")};this.add_indent_string=function(g){if(m&&
this.current_line.push(m),1<r.length){for(var n=0;n<g;n+=1)this.current_line.push(b);return!0}return!1};this.add_token=function(b){this.add_space_before_token();this.current_line.push(b)};this.add_space_before_token=function(){if(this.space_before_token&&this.current_line.get_item_count()){var g=this.current_line.last();" "!==g&&g!==b&&g!==m&&this.current_line.push(" ")}this.space_before_token=!1};this.remove_redundant_indentation=function(q){if(!q.multiline_frame&&q.mode!==g.ForInitializer&&q.mode!==
g.Conditional){q=q.start_line_index;for(var n=r.length;q<n;)r[q].remove_indent(b,m),q++}};this.trim=function(g){g=void 0===g?!1:g;for(this.current_line.trim(b,m);g&&1<r.length&&0===this.current_line.get_item_count();)r.pop(),this.current_line=r[r.length-1],this.current_line.trim(b,m)};this.just_added_newline=function(){return 0===this.current_line.get_item_count()};this.just_added_blankline=function(){return this.just_added_newline()?1===r.length?!0:0===r[r.length-2].get_item_count():!1}}function L(l,
g,n){function q(){var e,f,a,t,q,h;if(B=0,y=[],d>=w)return["","TK_EOF"];f=z.length?z[z.length-1]:new C("TK_START_BLOCK","{");a=l.charAt(d);for(d+=1;m(a,r);){if("\n"===a?(B+=1,y=[]):B&&(a===n?y.push(n):"\r"!==a&&y.push(" ")),d>=w)return["","TK_EOF"];a=l.charAt(d);d+=1}if(u.test(a)){h=f=!0;t=u;for("0"===a&&d<w&&/[Xx]/.test(l.charAt(d))?(f=!1,h=!1,a+=l.charAt(d),d+=1,t=/[0123456789abcdefABCDEF]/):(a="",--d);d<w&&t.test(l.charAt(d));)a+=l.charAt(d),d+=1,f&&d<w&&"."===l.charAt(d)&&(a+=l.charAt(d),d+=1,
f=!1),h&&d<w&&/[Ee]/.test(l.charAt(d))&&(a+=l.charAt(d),d+=1,d<w&&/[+-]/.test(l.charAt(d))&&(a+=l.charAt(d),d+=1),h=!1,f=!1);return[a,"TK_WORD"]}if(b.isIdentifierStart(l.charCodeAt(d-1))){if(d<w)for(;b.isIdentifierChar(l.charCodeAt(d))&&(a+=l.charAt(d),d+=1,d!==w););return"TK_DOT"===f.type||"TK_RESERVED"===f.type&&m(f.text,["set","get"])||!m(a,A)?[a,"TK_WORD"]:"in"===a?[a,"TK_OPERATOR"]:[a,"TK_RESERVED"]}if("("===a||"["===a)return[a,"TK_START_EXPR"];if(")"===a||"]"===a)return[a,"TK_END_EXPR"];if("{"===
a)return[a,"TK_START_BLOCK"];if("}"===a)return[a,"TK_END_BLOCK"];if(";"===a)return[a,"TK_SEMICOLON"];if("/"===a){if(t="",q=!0,"*"===l.charAt(d)){if(d+=1,d<w)for(;d<w&&("*"!==l.charAt(d)||!l.charAt(d+1)||"/"!==l.charAt(d+1))&&!(a=l.charAt(d),t+=a,("\n"===a||"\r"===a)&&(q=!1),d+=1,d>=w););return d+=2,q&&0===B?["/*"+t+"*/","TK_INLINE_COMMENT"]:["/*"+t+"*/","TK_BLOCK_COMMENT"]}if("/"===l.charAt(d)){for(t=a;"\r"!==l.charAt(d)&&"\n"!==l.charAt(d)&&!(t+=l.charAt(d),d+=1,d>=w););return[t,"TK_COMMENT"]}}if("`"===
a||"'"===a||'"'===a||("/"===a||g.e4x&&"\x3c"===a&&l.slice(d-1).match(/^<([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])\s*([-a-zA-Z:0-9_.]+=('[^']*'|"[^"]*"|{[^{}]*})\s*)*\/?\s*>/))&&("TK_RESERVED"===f.type&&m(f.text,"return case throw else do typeof yield".split(" "))||"TK_END_EXPR"===f.type&&")"===f.text&&f.parent&&"TK_RESERVED"===f.parent.type&&m(f.parent.text,["if","while","for"])||m(f.type,"TK_COMMENT TK_START_EXPR TK_START_BLOCK TK_END_BLOCK TK_OPERATOR TK_EQUALS TK_EOF TK_SEMICOLON TK_COMMA".split(" ")))){f=
a;var k=t=!1;if(e=a,"/"===f)for(h=!1;d<w&&(t||h||l.charAt(d)!==f)&&!b.newline.test(l.charAt(d));)e+=l.charAt(d),t?t=!1:(t="\\"===l.charAt(d),"["===l.charAt(d)?h=!0:"]"===l.charAt(d)&&(h=!1)),d+=1;else if(g.e4x&&"\x3c"===f){if(a=/<(\/?)([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])\s*([-a-zA-Z:0-9_.]+=('[^']*'|"[^"]*"|{[^{}]*})\s*)*(\/?)\s*>/g,t=l.slice(d-1),(q=a.exec(t))&&0===q.index){f=q[2];for(e=0;q;){var k=!!q[1],x=q[2],N=!!q[q.length-1]||"![CDATA["===x.slice(0,8);if(x!==f||N||(k?--e:++e),
0>=e)break;q=a.exec(t)}return h=q?q.index+q[0].length:t.length,d+=h-1,[t.slice(0,h),"TK_STRING"]}}else for(;d<w&&(t||l.charAt(d)!==f&&("`"===f||!b.newline.test(l.charAt(d))));)e+=l.charAt(d),t?(("x"===l.charAt(d)||"u"===l.charAt(d))&&(k=!0),t=!1):t="\\"===l.charAt(d),d+=1;if(k&&g.unescape_strings){a:{h=e;a=!1;t="";q=0;e="";for(k=0;a||q<h.length;)if(x=h.charAt(q),q++,a){if(a=!1,"x"===x)e=h.substr(q,2),q+=2;else if("u"===x)e=h.substr(q,4),q+=4;else{t+="\\"+x;continue}if(!e.match(/^[0123456789abcdefABCDEF]+$/))break a;
if(k=parseInt(e,16),0<=k&&32>k)t+="x"===x?"\\x"+e:"\\u"+e;else if(34===k||39===k||92===k)t+="\\"+String.fromCharCode(k);else{if("x"===x&&126<k&&255>=k)break a;t+=String.fromCharCode(k)}}else"\\"===x?a=!0:t+=x;h=t}e=h}if(d<w&&l.charAt(d)===f&&(e+=f,d+=1,"/"===f))for(;d<w&&b.isIdentifierStart(l.charCodeAt(d));)e+=l.charAt(d),d+=1;return[e,"TK_STRING"]}if("#"===a){if(0===z.length&&"!"===l.charAt(d)){for(e=a;d<w&&"\n"!==a;)a=l.charAt(d),e+=a,d+=1;return[H(e)+"\n","TK_UNKNOWN"]}if(f="#",d<w&&u.test(l.charAt(d))){do a=
l.charAt(d),f+=a,d+=1;while(d<w&&"#"!==a&&"\x3d"!==a);return"#"===a||("["===l.charAt(d)&&"]"===l.charAt(d+1)?(f+="[]",d+=2):"{"===l.charAt(d)&&"}"===l.charAt(d+1)&&(f+="{}",d+=2)),[f,"TK_WORD"]}}if("\x3c"===a&&"\x3c!--"===l.substring(d-1,d+3)){d+=3;for(a="\x3c!--";"\n"!==l.charAt(d)&&d<w;)a+=l.charAt(d),d++;return D=!0,[a,"TK_COMMENT"]}if("-"===a&&D&&"--\x3e"===l.substring(d-1,d+2))return D=!1,d+=2,["--\x3e","TK_COMMENT"];if("."===a)return[a,"TK_DOT"];if(m(a,v)){for(;d<w&&m(a+l.charAt(d),v)&&!(a+=
l.charAt(d),d+=1,d>=w););return","===a?[a,"TK_COMMA"]:"\x3d"===a?[a,"TK_EQUALS"]:[a,"TK_OPERATOR"]}return[a,"TK_UNKNOWN"]}var r=["\n","\r","\t"," "],u=/[0-9]/,v="+ - * / % \x26 ++ -- \x3d +\x3d -\x3d *\x3d /\x3d %\x3d \x3d\x3d \x3d\x3d\x3d !\x3d !\x3d\x3d \x3e \x3c \x3e\x3d \x3c\x3d \x3e\x3e \x3c\x3c \x3e\x3e\x3e \x3e\x3e\x3e\x3d \x3e\x3e\x3d \x3c\x3c\x3d \x26\x26 \x26\x3d | || ! ~ , : ? ^ ^\x3d |\x3d :: \x3d\x3e \x3c%\x3d \x3c% %\x3e \x3c?\x3d \x3c? ?\x3e".split(" "),A,B,y,D,z,d,w;this.line_starters=
"continue try throw return var let const if switch case default for while break function yield import export".split(" ");A=this.line_starters.concat("do in else get set new catch finally typeof".split(" "));this.tokenize=function(){w=l.length;d=0;D=!1;z=[];for(var e,f,a=null,b=[],g=[];!f||"TK_EOF"!==f.type;){e=q();for(e=new C(e[1],e[0],B,y);"TK_INLINE_COMMENT"===e.type||"TK_COMMENT"===e.type||"TK_BLOCK_COMMENT"===e.type||"TK_UNKNOWN"===e.type;)g.push(e),e=q(),e=new C(e[1],e[0],B,y);g.length&&(e.comments_before=
g,g=[]);"TK_START_BLOCK"===e.type||"TK_START_EXPR"===e.type?(e.parent=f,a=e,b.push(e)):("TK_END_BLOCK"===e.type||"TK_END_EXPR"===e.type)&&a&&("]"===e.text&&"["===a.text||")"===e.text&&"("===a.text||"}"===e.text&&"}"===a.text)&&(e.parent=a.parent,a=b.pop());z.push(e);f=e}return z}}var b={},g,C;(function(b){var g=RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),
m=RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿]");
b.newline=/[\n\r\u2028\u2029]/;b.isIdentifierStart=function(b){return 65>b?36===b:91>b?!0:97>b?95===b:123>b?!0:170<=b&&g.test(String.fromCharCode(b))};b.isIdentifierChar=function(b){return 48>b?36===b:58>b?!0:65>b?!1:91>b?!0:97>b?95===b:123>b?!0:170<=b&&m.test(String.fromCharCode(b))}})(b);g={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"};C=function(b,
g,m,n){this.type=b;this.text=g;this.comments_before=[];this.newlines=m||0;this.wanted_newline=0<m;this.whitespace_before=n||[];this.parent=null};"function"==typeof define&&define.amd?define([],function(){return{js_beautify:A}}):"undefined"!=typeof exports?exports.js_beautify=A:"undefined"!=typeof window?window.js_beautify=A:"undefined"!=typeof global&&(global.js_beautify=A)})();
(function(){function m(m,n,A,L){var b,g,C,l,H,O,q,G,u,v,P,B,y,D,z,d,w;n=n||{};void 0!==n.wrap_line_length&&0!==parseInt(n.wrap_line_length,10)||void 0===n.max_char||0===parseInt(n.max_char,10)||(n.wrap_line_length=n.max_char);g=void 0===n.indent_inner_html?!1:n.indent_inner_html;C=void 0===n.indent_size?4:parseInt(n.indent_size,10);l=void 0===n.indent_char?" ":n.indent_char;O=void 0===n.brace_style?"collapse":n.brace_style;H=0===parseInt(n.wrap_line_length,10)?32786:parseInt(n.wrap_line_length||250,
10);q=n.unformatted||"a span img bdo em strong dfn code samp kbd var cite abbr acronym q sub sup tt i b big small u s strike font ins del pre address dt h1 h2 h3 h4 h5 h6".split(" ");u=(G=void 0===n.preserve_newlines?!0:n.preserve_newlines)?isNaN(parseInt(n.max_preserve_newlines,10))?32786:parseInt(n.max_preserve_newlines,10):0;v=void 0===n.indent_handlebars?!1:n.indent_handlebars;P=void 0===n.end_with_newline?!1:n.end_with_newline;b=new function(){return this.pos=0,this.token="",this.current_mode=
"CONTENT",this.tags={parent:"parent1",parentcount:1,parent1:""},this.tag_type="",this.token_text=this.last_token=this.last_text=this.token_type="",this.newlines=0,this.indent_content=g,this.Utils={whitespace:["\n","\r","\t"," "],single_token:"br input link meta !doctype basefont base area hr wbr param img isindex ?xml embed ?php ? ?\x3d".split(" "),extra_liners:["head","body","/html"],in_array:function(e,f){for(var a=0;a<f.length;a++)if(e===f[a])return!0;return!1}},this.is_whitespace=function(e){for(;0<
e.length;e++)if(!this.Utils.in_array(e.charAt(0),this.Utils.whitespace))return!1;return!0},this.traverse_whitespace=function(){var e="";if(e=this.input.charAt(this.pos),this.Utils.in_array(e,this.Utils.whitespace)){for(this.newlines=0;this.Utils.in_array(e,this.Utils.whitespace);)G&&"\n"===e&&this.newlines<=u&&(this.newlines+=1),this.pos++,e=this.input.charAt(this.pos);return!0}return!1},this.space_or_wrap=function(e){this.line_char_count>=this.wrap_line_length?(this.print_newline(!1,e),this.print_indentation(e)):
(this.line_char_count++,e.push(" "))},this.get_content=function(){for(var e="",f=[],a;"\x3c"!==this.input.charAt(this.pos);){if(this.pos>=this.input.length)return f.length?f.join(""):["","TK_EOF"];if(this.traverse_whitespace())this.space_or_wrap(f);else{if(v)if(a=this.input.substr(this.pos,3),"{{#"===a||"{{/"===a)break;else if("{{"===this.input.substr(this.pos,2)&&"{{else}}"===this.get_tag(!0))break;e=this.input.charAt(this.pos);this.pos++;this.line_char_count++;f.push(e)}}return f.length?f.join(""):
""},this.get_contents_to=function(e){var f,a;if(this.pos===this.input.length)return["","TK_EOF"];var b="";e=new RegExp("\x3c/"+e+"\\s*\x3e","igm");return e.lastIndex=this.pos,f=e.exec(this.input),a=f?f.index:this.input.length,this.pos<a&&(b=this.input.substring(this.pos,a),this.pos=a),b},this.record_tag=function(e){this.tags[e+"count"]?(this.tags[e+"count"]++,this.tags[e+this.tags[e+"count"]]=this.indent_level):(this.tags[e+"count"]=1,this.tags[e+this.tags[e+"count"]]=this.indent_level);this.tags[e+
this.tags[e+"count"]+"parent"]=this.tags.parent;this.tags.parent=e+this.tags[e+"count"]},this.retrieve_tag=function(e){if(this.tags[e+"count"]){for(var b=this.tags.parent;b&&e+this.tags[e+"count"]!==b;)b=this.tags[b+"parent"];b&&(this.indent_level=this.tags[e+this.tags[e+"count"]],this.tags.parent=this.tags[b+"parent"]);delete this.tags[e+this.tags[e+"count"]+"parent"];delete this.tags[e+this.tags[e+"count"]];1===this.tags[e+"count"]?delete this.tags[e+"count"]:this.tags[e+"count"]--}},this.indent_to_tag=
function(e){if(this.tags[e+"count"]){for(var b=this.tags.parent;b&&e+this.tags[e+"count"]!==b;)b=this.tags[b+"parent"];b&&(this.indent_level=this.tags[e+this.tags[e+"count"]])}},this.get_tag=function(e){var b="",a=[],d="",g=!1,h,k,l=this.pos,m=this.line_char_count,c,n,u,r;e=void 0!==e?e:!1;do{if(this.pos>=this.input.length)return e&&(this.pos=l,this.line_char_count=m),a.length?a.join(""):["","TK_EOF"];if(b=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(b,this.Utils.whitespace))g=!0;else{if(("'"===
b||'"'===b)&&(b+=this.get_unformatted(b),g=!0),"\x3d"===b&&(g=!1),a.length&&"\x3d"!==a[a.length-1]&&"\x3e"!==b&&g&&(this.space_or_wrap(a),g=!1),v&&"\x3c"===k&&"{{"===b+this.input.charAt(this.pos)&&(b+=this.get_unformatted("}}"),a.length&&" "!==a[a.length-1]&&"\x3c"!==a[a.length-1]&&(b=" "+b),g=!0),"\x3c"!==b||k||(h=this.pos-1,k="\x3c"),v&&!k&&2<=a.length&&"{"===a[a.length-1]&&"{"==a[a.length-2]&&(h="#"===b||"/"===b?this.pos-3:this.pos-2,k="{"),this.line_char_count++,a.push(b),a[1]&&"!"===a[1]){a=
[this.get_comment(h)];break}if(v&&"{"===k&&2<a.length&&"}"===a[a.length-2]&&"}"===a[a.length-1])break}}while("\x3e"!==b);return c=a.join(""),n=-1!==c.indexOf(" ")?c.indexOf(" "):"{"===c[0]?c.indexOf("}"):c.indexOf("\x3e"),u="\x3c"!==c[0]&&v?"#"===c[2]?3:2:1,r=c.substring(u,n).toLowerCase(),"/"===c.charAt(c.length-2)||this.Utils.in_array(r,this.Utils.single_token)?e||(this.tag_type="SINGLE"):v&&"{"===c[0]&&"else"===r?e||(this.indent_to_tag("if"),this.tag_type="HANDLEBARS_ELSE",this.indent_content=
!0,this.traverse_whitespace()):this.is_unformatted(r,q)?(d=this.get_unformatted("\x3c/"+r+"\x3e",c),a.push(d),this.tag_type="SINGLE"):"script"===r&&(-1===c.search("type")||-1<c.search("type")&&-1<c.search(/\b(text|application)\/(x-)?(javascript|ecmascript|jscript|livescript)/))?e||(this.record_tag(r),this.tag_type="SCRIPT"):"style"===r&&(-1===c.search("type")||-1<c.search("type")&&-1<c.search("text/css"))?e||(this.record_tag(r),this.tag_type="STYLE"):"!"===r.charAt(0)?e||(this.tag_type="SINGLE",this.traverse_whitespace()):
e||("/"===r.charAt(0)?(this.retrieve_tag(r.substring(1)),this.tag_type="END"):(this.record_tag(r),"html"!==r.toLowerCase()&&(this.indent_content=!0),this.tag_type="START"),this.traverse_whitespace()&&this.space_or_wrap(a),this.Utils.in_array(r,this.Utils.extra_liners)&&(this.print_newline(!1,this.output),this.output.length&&"\n"!==this.output[this.output.length-2]&&this.print_newline(!0,this.output))),e&&(this.pos=l,this.line_char_count=m),a.join("")},this.get_comment=function(b){var d="",a="\x3e",
g=!1;this.pos=b;input_char=this.input.charAt(this.pos);for(this.pos++;this.pos<=this.input.length&&(d+=input_char,d[d.length-1]!==a[a.length-1]||-1===d.indexOf(a));)!g&&10>d.length&&(0===d.indexOf("\x3c![if")?(a="\x3c![endif]\x3e",g=!0):0===d.indexOf("\x3c![cdata[")?(a="]]\x3e",g=!0):0===d.indexOf("\x3c![")?(a="]\x3e",g=!0):0===d.indexOf("\x3c!--")&&(a="--\x3e",g=!0)),input_char=this.input.charAt(this.pos),this.pos++;return d},this.get_unformatted=function(b,d){if(d&&-1!==d.toLowerCase().indexOf(b))return"";
var a="",g="",l=0,h=!0;do{if(this.pos>=this.input.length)break;if(a=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(a,this.Utils.whitespace)){if(!h){this.line_char_count--;continue}if("\n"===a||"\r"===a){g+="\n";this.line_char_count=0;continue}}g+=a;this.line_char_count++;h=!0;v&&"{"===a&&g.length&&"{"===g[g.length-2]&&(g+=this.get_unformatted("}}"),l=g.length)}while(-1===g.toLowerCase().indexOf(b,l));return g},this.get_token=function(){var b,d,a;return"TK_TAG_SCRIPT"===this.last_token||
"TK_TAG_STYLE"===this.last_token?(d=this.last_token.substr(7),b=this.get_contents_to(d),"string"!=typeof b)?b:[b,"TK_"+d]:"CONTENT"===this.current_mode?(b=this.get_content(),"string"!=typeof b?b:[b,"TK_CONTENT"]):"TAG"===this.current_mode?(b=this.get_tag(),"string"!=typeof b?b:(a="TK_TAG_"+this.tag_type,[b,a])):void 0},this.get_full_indent=function(b){return(b=this.indent_level+b||0,1>b)?"":Array(b+1).join(this.indent_string)},this.is_unformatted=function(b,d){if(!this.Utils.in_array(b,d))return!1;
if("a"!==b.toLowerCase()||!this.Utils.in_array("a",d))return!0;var a=(this.get_tag(!0)||"").match(/^\s*<\s*\/?([a-z]*)\s*[^>]*>\s*$/);return!a||this.Utils.in_array(a,d)?!0:!1},this.printer=function(b,d,a,g,l){this.input=b||"";this.output=[];this.indent_character=d;this.indent_string="";this.indent_size=a;this.brace_style=l;this.indent_level=0;this.wrap_line_length=g;for(b=this.line_char_count=0;b<this.indent_size;b++)this.indent_string+=this.indent_character;this.print_newline=function(b,a){(this.line_char_count=
0,a&&a.length)&&(b||"\n"!==a[a.length-1])&&("\n"!==a[a.length-1]&&(a[a.length-1]=a[a.length-1].replace(/\s+$/g,"")),a.push("\n"))};this.print_indentation=function(a){for(var b=0;b<this.indent_level;b++)a.push(this.indent_string),this.line_char_count+=this.indent_string.length};this.print_token=function(a){this.is_whitespace(a)&&!this.output.length||((a||""!==a)&&this.output.length&&"\n"===this.output[this.output.length-1]&&(this.print_indentation(this.output),a=a.replace(/^\s+/g,"")),this.print_token_raw(a))};
this.print_token_raw=function(a){0<this.newlines&&(a=a.replace(/\s+$/g,""));a&&""!==a&&(1<a.length&&"\n"===a[a.length-1]?(this.output.push(a.slice(0,-1)),this.print_newline(!1,this.output)):this.output.push(a));for(a=0;a<this.newlines;a++)this.print_newline(0<a,this.output);this.newlines=0};this.indent=function(){this.indent_level++};this.unindent=function(){0<this.indent_level&&this.indent_level--}},this};for(b.printer(m,l,C,H,O);B=b.get_token(),b.token_text=B[0],b.token_type=B[1],"TK_EOF"!==b.token_type;){switch(b.token_type){case "TK_TAG_START":b.print_newline(!1,
b.output);b.print_token(b.token_text);b.indent_content&&(b.indent(),b.indent_content=!1);b.current_mode="CONTENT";break;case "TK_TAG_STYLE":case "TK_TAG_SCRIPT":b.print_newline(!1,b.output);b.print_token(b.token_text);b.current_mode="CONTENT";break;case "TK_TAG_END":"TK_CONTENT"!==b.last_token||""!==b.last_text||(y=b.token_text.match(/\w+/)[0],D=null,b.output.length&&(D=b.output[b.output.length-1].match(/(?:<|{{#)\s*(\w+)/)),null!==D&&D[1]===y||b.print_newline(!1,b.output));b.print_token(b.token_text);
b.current_mode="CONTENT";break;case "TK_TAG_SINGLE":(m=b.token_text.match(/^\s*<([a-z-]+)/i))&&b.Utils.in_array(m[1],q)||b.print_newline(!1,b.output);b.print_token(b.token_text);b.current_mode="CONTENT";break;case "TK_TAG_HANDLEBARS_ELSE":b.print_token(b.token_text);b.indent_content&&(b.indent(),b.indent_content=!1);b.current_mode="CONTENT";break;case "TK_CONTENT":b.print_token(b.token_text);b.current_mode="TAG";break;case "TK_STYLE":case "TK_SCRIPT":""!==b.token_text&&((b.print_newline(!1,b.output),
m=b.token_text,d=1,"TK_SCRIPT"===b.token_type?z="function"==typeof A&&A:"TK_STYLE"===b.token_type&&(z="function"==typeof L&&L),"keep"===n.indent_scripts?d=0:"separate"===n.indent_scripts&&(d=-b.indent_level),C=b.get_full_indent(d),z)?m=z(m.replace(/^\s*/,C),n):(l=m.match(/^\s*/)[0].match(/[^\n\r]*$/)[0].split(b.indent_string).length-1,l=b.get_full_indent(d-l),m=m.replace(/^\s*/,C).replace(/\r\n|\r|\n/g,"\n"+l).replace(/\s+$/,"")),m&&(b.print_token_raw(m),b.print_newline(!0,b.output)));b.current_mode=
"TAG";break;default:""!==b.token_text&&b.print_token(b.token_text)}b.last_token=b.token_type;b.last_text=b.token_text}return w=b.output.join("").replace(/[\r\n\t ]+$/,""),P&&(w+="\n"),w}if("function"==typeof define&&define.amd)define(["require","./beautify","./beautify-css"],function(r){var n=r("./beautify"),A=r("./beautify-css");return{html_beautify:function(r,b){return m(r,b,n.js_beautify,A.css_beautify)}}});else if("undefined"!=typeof exports){var H=require("./beautify.js"),A=require("./beautify-css.js");
exports.html_beautify=function(r,n){return m(r,n,H.js_beautify,A.css_beautify)}}else"undefined"!=typeof window?window.html_beautify=function(r,n){return m(r,n,window.js_beautify,window.css_beautify)}:"undefined"!=typeof global&&(global.html_beautify=function(r,n){return m(r,n,global.js_beautify,global.css_beautify)})})();