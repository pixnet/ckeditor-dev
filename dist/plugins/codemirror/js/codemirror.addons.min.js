(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function n(b,m){return"pairs"==m&&"string"==typeof b?b:"object"==typeof b&&null!=b[m]?b[m]:p[m]}function g(b){return function(m){return e(m,b)}}function h(b){var m=b.state.closeBrackets,c;return m?(c=b.getModeAt(b.getCursor()),c.closeBrackets||m):null}function e(b,m){var l=h(b),k,e,p,q;if(!l||b.getOption("disableInput")||
(k=n(l,"pairs"),e=k.indexOf(m),-1==e))return a.Pass;for(var g=n(l,"triples"),A=k.charAt(e+1)==m,w=b.listSelections(),E=0==e%2,z,v,l=0;l<w.length;l++){var F=w[l],u=F.head;v=b.getRange(u,c(u.line,u.ch+1));if(E&&!F.empty())v="surround";else if(!A&&E||v!=m)if(A&&1<u.ch&&0<=g.indexOf(m)&&b.getRange(c(u.line,u.ch-2),u)==m+m&&(2>=u.ch||b.getRange(c(u.line,u.ch-3),c(u.line,u.ch-2))!=m))v="addFour";else if(A)if(!a.isWordChar(v)&&d(b,u,m))v="both";else return a.Pass;else if(E&&(b.getLine(u.line).length==u.ch||
f(v,k)||/\s/.test(v)))v="both";else return a.Pass;else v=0<=g.indexOf(m)&&b.getRange(u,c(u.line,u.ch+3))==m+m+m?"skipThree":"skip";if(z){if(z!=v)return a.Pass}else z=v}p=e%2?k.charAt(e-1):m;q=e%2?m:k.charAt(e+1);b.operation(function(){var m,c;if("skip"==z)b.execCommand("goCharRight");else if("skipThree"==z)for(c=0;3>c;c++)b.execCommand("goCharRight");else if("surround"==z){m=b.getSelections();for(c=0;c<m.length;c++)m[c]=p+m[c]+q;b.replaceSelections(m,"around")}else"both"==z?(b.replaceSelection(p+
q,null),b.triggerElectric(p+q),b.execCommand("goCharLeft")):"addFour"==z&&(b.replaceSelection(p+p+p+p,"before"),b.execCommand("goCharRight"))})}function f(b,m){var c=m.lastIndexOf(b);return-1<c&&1==c%2}function k(b,m){var d=b.getRange(c(m.line,m.ch-1),c(m.line,m.ch+1));return 2==d.length?d:null}function d(b,c,d){var l=b.getLine(c.line),f=b.getTokenAt(c);if(/\bstring2?\b/.test(f.type))return!1;d=new a.StringStream(l.slice(0,c.ch)+d+l.slice(c.ch),4);for(d.pos=d.start=f.start;;){if(l=b.getMode().token(d,
f.state),d.pos>=c.ch+1)return/\bstring2?\b/.test(l);d.start=d.pos}}var p={pairs:"()[]{}''\"\"",triples:"",explode:"[]{}"},c=a.Pos,q,l,b;a.defineOption("autoCloseBrackets",!1,function(b,c,d){d&&d!=a.Init&&(b.removeKeyMap(l),b.state.closeBrackets=null);c&&(b.state.closeBrackets=c,b.addKeyMap(l))});q=p.pairs+"`";l={Backspace:function(b){var d=h(b),l,f,e;if(!d||b.getOption("disableInput"))return a.Pass;l=n(d,"pairs");d=b.listSelections();for(e=0;e<d.length;e++)if(!d[e].empty()||(f=k(b,d[e].head),!f||
0!=l.indexOf(f)%2))return a.Pass;for(e=d.length-1;0<=e;e--)f=d[e].head,b.replaceRange("",c(f.line,f.ch-1),c(f.line,f.ch+1))},Enter:function(b){var c=h(b),c=c&&n(c,"explode"),d,l,f;if(!c||b.getOption("disableInput"))return a.Pass;d=b.listSelections();for(l=0;l<d.length;l++)if(!d[l].empty()||(f=k(b,d[l].head),!f||0!=c.indexOf(f)%2))return a.Pass;b.operation(function(){var c,l;b.replaceSelection("\n\n",null);b.execCommand("goCharLeft");d=b.listSelections();for(c=0;c<d.length;c++)l=d[c].head.line,b.indentLine(l,
null,!0),b.indentLine(l+1,null,!0)})}};for(b=0;b<q.length;b++)l["'"+q.charAt(b)+"'"]=g(q.charAt(b))});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror"),require("../fold/xml-fold")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../fold/xml-fold"],a):a(CodeMirror)})(function(a){function n(d){var p,c,q,l,b,r;if(d.getOption("disableInput"))return a.Pass;p=d.listSelections();c=[];for(b=0;b<p.length;b++){if(!p[b].empty())return a.Pass;r=p[b].head;l=d.getTokenAt(r);var m=a.innerMode(d.getMode(),l.state),t=m.state;if("xml"!=m.mode.name||
!t.tagName)return a.Pass;var g=d.getOption("autoCloseTags"),n="html"==m.mode.configuration,m="object"==typeof g&&g.dontCloseTags||n&&f,n="object"==typeof g&&g.indentTags||n&&k,g=t.tagName;if(l.end>r.ch&&(g=g.slice(0,g.length-l.end+r.ch)),q=g.toLowerCase(),!g||"string"==l.type&&(l.end!=r.ch||!/[\"\']/.test(l.string.charAt(l.string.length-1))||1==l.string.length)||"tag"==l.type&&"closeTag"==t.type||l.string.indexOf("/")==l.string.length-1||m&&-1<h(m,q)||e(d,g,r,t,!0))return a.Pass;l=n&&-1<h(n,q);c[b]=
{indent:l,text:"\x3e"+(l?"\n\n":"")+"\x3c/"+g+"\x3e",newPos:l?a.Pos(r.line+1,0):a.Pos(r.line,r.ch+1)}}for(b=p.length-1;0<=b;b--)q=c[b],d.replaceRange(q.text,p[b].head,p[b].anchor,"+insert"),r=d.listSelections().slice(0),r[b]={head:q.newPos,anchor:q.newPos},d.setSelections(r),q.indent&&(d.indentLine(q.newPos.line,null,!0),d.indentLine(q.newPos.line+1,null,!0))}function g(d,f){for(var c=d.listSelections(),k=[],l=f?"/":"\x3c/",b=0;b<c.length;b++){if(!c[b].empty())return a.Pass;var r=c[b].head,m=d.getTokenAt(r),
g=a.innerMode(d.getMode(),m.state),h=g.state;if(f&&("string"==m.type||"\x3c"!=m.string.charAt(0)||m.start!=r.ch-1))return a.Pass;if("xml"!=g.mode.name)if("htmlmixed"==d.getMode().name&&"javascript"==g.mode.name)k[b]=l+"script\x3e";else if("htmlmixed"==d.getMode().name&&"css"==g.mode.name)k[b]=l+"style\x3e";else return a.Pass;else{if(!h.context||!h.context.tagName||e(d,h.context.tagName,r,h))return a.Pass;k[b]=l+h.context.tagName+"\x3e"}}d.replaceSelections(k);c=d.listSelections();for(b=0;b<c.length;b++)(b==
c.length-1||c[b].head.line<c[b+1].head.line)&&d.indentLine(c[b].head.line)}function h(d,f){if(d.indexOf)return d.indexOf(f);for(var c=0,a=d.length;c<a;++c)if(d[c]==f)return c;return-1}function e(d,f,c,k,l){var b,r,m;if(!a.scanForClosingTag||(b=Math.min(d.lastLine()+1,c.line+500),r=a.scanForClosingTag(d,c,null,b),!r||r.tag!=f))return!1;c=k.context;for(l=l?1:0;c&&c.tagName==f;c=c.prev)++l;c=r.to;for(r=1;r<l;r++){if(m=a.scanForClosingTag(d,c,null,b),!m||m.tag!=f)return!1;c=m.to}return!0}a.defineOption("autoCloseTags",
!1,function(d,f,c){if(c!=a.Init&&c&&d.removeKeyMap("autoCloseTags"),f)c={name:"autoCloseTags"},("object"!=typeof f||f.whenClosing)&&(c["'/'"]=function(c){return c.getOption("disableInput")?a.Pass:g(c,!0)}),("object"!=typeof f||f.whenOpening)&&(c["'\x3e'"]=function(c){return n(c)}),d.addKeyMap(c)});var f="area base br col command embed hr img input keygen link meta param source track wbr".split(" "),k="applet blockquote body button div dl fieldset form frameset h1 h2 h3 h4 h5 h6 head html iframe layer legend object ol p select table ul".split(" ");
a.commands.closeTag=function(d){return g(d)}});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function n(f){var k,d,e,c,q,l,b,r,m,t,h;if(f.getOption("disableInput"))return a.Pass;k=f.listSelections();e=[];for(c=0;c<k.length;c++){if(q=k[c].head,l=f.getTokenAt(q),"comment"!=l.type)return a.Pass;if(b=a.innerMode(f.getMode(),l.state).mode,d){if(d!=b)return a.Pass}else d=b;if(b=null,d.blockCommentStart&&
d.blockCommentContinue){if(r=l.string.indexOf(d.blockCommentEnd),m=f.getRange(a.Pos(q.line,0),a.Pos(q.line,l.end)),-1==r||r!=l.string.length-d.blockCommentEnd.length||!(q.ch>=r))if(0==l.string.indexOf(d.blockCommentStart)){if(b=m.slice(0,l.start),!/^\s*$/.test(b))for(b="",m=0;m<l.start;++m)b+=" "}else-1!=(h=m.indexOf(d.blockCommentContinue))&&h+d.blockCommentContinue.length>l.start&&/^\s*$/.test(m.slice(0,h))&&(b=m.slice(0,h));null!=b&&(b+=d.blockCommentContinue)}if(null==b&&d.lineComment&&g(f)&&
(t=f.getLine(q.line),h=t.indexOf(d.lineComment),-1<h&&(b=t.slice(0,h),/\S/.test(b)?b=null:b+=d.lineComment+t.slice(h+d.lineComment.length).match(/^\s*/)[0])),null==b)return a.Pass;e[c]="\n"+b}f.operation(function(){for(var b=k.length-1;0<=b;b--)f.replaceRange(e[b],k[b].from(),k[b].to(),"+insert")})}function g(f){return(f=f.getOption("continueComments"))&&"object"==typeof f?!1!==f.continueLineComment:!0}for(var h=["clike","css","javascript"],e=0;e<h.length;++e)a.extendMode(h[e],{blockCommentContinue:" * "});
a.defineOption("continueComments",null,function(f,k,d){var e,c;d&&d!=a.Init&&f.removeKeyMap("continueComment");k&&(e="Enter","string"==typeof k?e=k:"object"==typeof k&&k.key&&(e=k.key),c={name:"continueComment"},c[e]=n,f.addKeyMap(c))})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function n(c,f,l,b){var a=c.getLineHandle(f.line),m=f.ch-1,a=0<=m&&d[a.text.charAt(m)]||d[a.text.charAt(++m)],e,h,p;return a?(e="\x3e"==a.charAt(1)?1:-1,l&&0<e!=(m==f.ch))?null:(h=c.getTokenTypeAt(k(f.line,m+1)),p=g(c,k(f.line,m+(0<e?1:0)),e,h||null,b),null==p)?null:{from:k(f.line,m),to:p&&p.pos,match:p&&
p.ch==a.charAt(0),forward:0<e}:null}function g(c,f,l,b,a){var m,e,g,p,h,n=a&&a.maxScanLineLength||1E4,D=a&&a.maxScanLines||1E3,A=[];a=a&&a.bracketRegex?a.bracketRegex:/[(){}[\]]/;for(var D=0<l?Math.min(f.line+D,c.lastLine()+1):Math.max(c.firstLine()-1,f.line-D),w=f.line;w!=D;w+=l)if((m=c.getLine(w),m)&&(e=0<l?0:m.length-1,g=0<l?m.length:-1,!(m.length>n)))for(w==f.line&&(e=f.ch-(0>l?1:0));e!=g;e+=l)if(p=m.charAt(e),a.test(p)&&(void 0===b||c.getTokenTypeAt(k(w,e+1))==b))if(h=d[p],"\x3e"==h.charAt(1)==
0<l)A.push(p);else if(A.length)A.pop();else return{pos:k(w,e),ch:p};return w-l==(0<l?c.lastLine():c.firstLine())?!1:null}function h(c,d,a){for(var b,e,m=c.state.matchBrackets.maxHighlightLineLength||1E3,g=[],p=c.listSelections(),h=0;h<p.length;h++)(b=p[h].empty()&&n(c,p[h].head,!1,a))&&c.getLine(b.from.line).length<=m&&(e=b.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",g.push(c.markText(b.from,k(b.from.line,b.from.ch+1),{className:e})),b.to&&c.getLine(b.to.line).length<=m&&g.push(c.markText(b.to,
k(b.to.line,b.to.ch+1),{className:e})));if(g.length)if(f&&c.state.focused&&c.focus(),a=function(){c.operation(function(){for(var b=0;b<g.length;b++)g[b].clear()})},d)setTimeout(a,800);else return a}function e(c){c.operation(function(){p&&(p(),p=null);p=h(c,!1,c.state.matchBrackets)})}var f=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||8>document.documentMode),k=a.Pos,d={"(":")\x3e",")":"(\x3c","[":"]\x3e","]":"[\x3c","{":"}\x3e","}":"{\x3c"},p=null;a.defineOption("matchBrackets",
!1,function(c,f,d){if(d&&d!=a.Init&&c.off("cursorActivity",e),f)c.state.matchBrackets="object"==typeof f?f:{},c.on("cursorActivity",e)});a.defineExtension("matchBrackets",function(){h(this,!0)});a.defineExtension("findMatchingBracket",function(c,f,d){return n(this,c,f,d)});a.defineExtension("scanForBracket",function(c,f,d,b){return g(this,c,f,d,b)})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror"),require("../fold/xml-fold")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../fold/xml-fold"],a):a(CodeMirror)})(function(a){function n(a){a.state.tagHit&&a.state.tagHit.clear();a.state.tagOther&&a.state.tagOther.clear();a.state.tagHit=a.state.tagOther=null}function g(e){e.state.failedTagMatch=!1;e.operation(function(){var f,k,d,g,c;(n(e),e.somethingSelected())||(f=e.getCursor(),
k=e.getViewport(),k.from=Math.min(k.from,f.line),k.to=Math.max(f.line+1,k.to),d=a.findMatchingTag(e,f,k),d)&&(e.state.matchBothTags&&(g="open"==d.at?d.open:d.close,g&&(e.state.tagHit=e.markText(g.from,g.to,{className:"CodeMirror-matchingtag"}))),c="close"==d.at?d.open:d.close,c?e.state.tagOther=e.markText(c.from,c.to,{className:"CodeMirror-matchingtag"}):e.state.failedTagMatch=!0)})}function h(a){a.state.failedTagMatch&&g(a)}a.defineOption("matchTags",!1,function(e,f,k){if(k&&k!=a.Init&&(e.off("cursorActivity",
g),e.off("viewportChange",h),n(e)),f)e.state.matchBothTags="object"==typeof f&&f.bothTags,e.on("cursorActivity",g),e.on("viewportChange",h),g(e)});a.commands.toMatchingTag=function(e){var f=a.findMatchingTag(e,e.getCursor()),k;f&&(k="close"==f.at?f.open:f.close,k&&e.extendSelection(k.to,k.from))}});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){a.defineOption("showTrailingSpace",!1,function(n,g,h){h==a.Init&&(h=!1);h&&!g?n.removeOverlay("trailingspace"):!h&&g&&n.addOverlay({token:function(a){for(var f=a.string.length,k=f;k&&/\s/.test(a.string.charAt(k-1));--k);return k>a.pos?(a.pos=k,null):(a.pos=f,"trailingspace")},name:"trailingspace"})})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function n(f,k,d,e){function c(b){var c=n(f,k),d,a;if(!c||c.to.line-c.from.line<l)return null;d=f.findMarksAt(c.from);for(a=0;a<d.length;++a)if(d[a].__isFold&&"fold"!==e){if(!b)return null;c.cleared=!0;d[a].clear()}return c}var n,l,b,r;if(d&&d.call?(n=d,d=null):n=h(f,d,"rangeFinder"),"number"==typeof k&&
(k=a.Pos(k,0)),l=h(f,d,"minFoldSize"),b=c(!0),h(f,d,"scanUp"))for(;!b&&k.line>f.firstLine();)k=a.Pos(k.line-1,0),b=c(!1);b&&!b.cleared&&"unfold"!==e&&(d=g(f,d),a.on(d,"mousedown",function(b){r.clear();a.e_preventDefault(b)}),r=f.markText(b.from,b.to,{replacedWith:d,clearOnEnter:!0,__isFold:!0}),r.on("clear",function(b,c){a.signal(f,"unfold",f,b,c)}),a.signal(f,"fold",f,b.from,b.to))}function g(f,a){var d=h(f,a,"widget"),e;return"string"==typeof d&&(e=document.createTextNode(d),d=document.createElement("span"),
d.appendChild(e),d.className="CodeMirror-foldmarker"),d}function h(f,a,d){return a&&void 0!==a[d]?a[d]:(f=f.options.foldOptions)&&void 0!==f[d]?f[d]:e[d]}a.newFoldFunction=function(a,e){return function(d,g){n(d,g,{rangeFinder:a,widget:e})}};a.defineExtension("foldCode",function(a,e,d){n(this,a,e,d)});a.defineExtension("isFolded",function(a){a=this.findMarksAt(a);for(var e=0;e<a.length;++e)if(a[e].__isFold)return!0});a.commands.toggleFold=function(a){a.foldCode(a.getCursor())};a.commands.fold=function(a){a.foldCode(a.getCursor(),
null,"fold")};a.commands.unfold=function(a){a.foldCode(a.getCursor(),null,"unfold")};a.commands.foldAll=function(f){f.operation(function(){for(var e=f.firstLine(),d=f.lastLine();e<=d;e++)f.foldCode(a.Pos(e,0),null,"fold")})};a.commands.unfoldAll=function(f){f.operation(function(){for(var e=f.firstLine(),d=f.lastLine();e<=d;e++)f.foldCode(a.Pos(e,0),null,"unfold")})};a.registerHelper("fold","combine",function(){var a=Array.prototype.slice.call(arguments,0);return function(e,d){for(var g,c=0;c<a.length;++c)if(g=
a[c](e,d),g)return g}});a.registerHelper("fold","auto",function(a,e){for(var d,g=a.getHelpers(e,"fold"),c=0;c<g.length;c++)if(d=g[c](a,e),d)return d});var e={rangeFinder:a.fold.auto,widget:"↔",minFoldSize:0,scanUp:!1};a.defineOption("foldOptions",null);a.defineExtension("foldOption",function(a,e){return h(this,a,e)})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror"),require("./foldcode")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./foldcode"],a):a(CodeMirror)})(function(a){function n(a){this.options=a;this.from=this.to=0}function g(a,b){for(var c=a.findMarksAt(q(b)),d=0;d<c.length;++d)if(c[d].__isFold&&c[d].find().from.line==b)return c[d]}function h(a){if("string"==typeof a){var b=document.createElement("div");return b.className=a+" CodeMirror-guttermarker-subtle",
b}return a.cloneNode(!0)}function e(a,b,c){var d=a.state.foldGutter.options,f=b,e=a.foldOption(d,"minFoldSize"),k=a.foldOption(d,"rangeFinder");a.eachLine(b,c,function(b){var c=null,r,p;g(a,f)?c=h(d.indicatorFolded):(r=q(f,0),p=k&&k(a,r),p&&p.to.line-p.from.line>=e&&(c=h(d.indicatorOpen)));a.setGutterMarker(b,d.gutter,c);++f})}function f(a){var b=a.getViewport(),c=a.state.foldGutter;c&&(a.operation(function(){e(a,b.from,b.to)}),c.from=b.from,c.to=b.to)}function k(a,b,c){var d=a.state.foldGutter,f,
e;d&&(f=d.options,c==f.gutter)&&(e=g(a,b),e?e.clear():a.foldCode(q(b,0),f.rangeFinder))}function d(a){var b=a.state.foldGutter,c;b&&(c=b.options,b.from=b.to=0,clearTimeout(b.changeUpdate),b.changeUpdate=setTimeout(function(){f(a)},c.foldOnChangeTimeSpan||600))}function p(a){var b=a.state.foldGutter,c;b&&(c=b.options,clearTimeout(b.changeUpdate),b.changeUpdate=setTimeout(function(){var c=a.getViewport();b.from==b.to||20<c.from-b.to||20<b.from-c.to?f(a):a.operation(function(){c.from<b.from&&(e(a,c.from,
b.from),b.from=c.from);c.to>b.to&&(e(a,b.to,c.to),b.to=c.to)})},c.updateViewportTimeSpan||400))}function c(a,b){var c=a.state.foldGutter,d;c&&(d=b.line,d>=c.from&&d<c.to&&e(a,d,d+1))}a.defineOption("foldGutter",!1,function(e,b,g){if(g&&g!=a.Init&&(e.clearGutter(e.state.foldGutter.options.gutter),e.state.foldGutter=null,e.off("gutterClick",k),e.off("change",d),e.off("viewportChange",p),e.off("fold",c),e.off("unfold",c),e.off("swapDoc",f)),b){g=e.state;var m=b;b=(!0===m&&(m={}),null==m.gutter&&(m.gutter=
"CodeMirror-foldgutter"),null==m.indicatorOpen&&(m.indicatorOpen="CodeMirror-foldgutter-open"),null==m.indicatorFolded&&(m.indicatorFolded="CodeMirror-foldgutter-folded"),m);g.foldGutter=new n(b);f(e);e.on("gutterClick",k);e.on("change",d);e.on("viewportChange",p);e.on("fold",c);e.on("unfold",c);e.on("swapDoc",f)}});var q=a.Pos});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){a.registerHelper("fold","brace",function(n,g){function h(b){for(var c,d=g.ch,m=0;;)if(c=0>=d?-1:f.lastIndexOf(b,d-1),-1==c){if(1==m)break;m=1;d=f.length}else{if(1==m&&c<g.ch)break;if(k=n.getTokenTypeAt(a.Pos(e,c+1)),!/^(comment|string)/.test(k))return c+1;d=c-1}}var e=g.line,f=n.getLine(e),k,d="{",p="}",
c=h("{"),q,l,b,r,m,t,x,B,y;if(null==c&&(d="[",p="]",c=h("[")),null!=c){q=1;l=n.lastLine();m=e;a:for(;m<=l;++m)for(t=n.getLine(m),x=m==e?c:0;B=t.indexOf(d,x),y=t.indexOf(p,x),0>B&&(B=t.length),0>y&&(y=t.length),x=Math.min(B,y),x!=t.length;){if(n.getTokenTypeAt(a.Pos(m,x+1))==k)if(x==B)++q;else if(!--q){b=m;r=x;break a}++x}if(null!=b&&(e!=b||r!=c))return{from:a.Pos(e,c),to:a.Pos(b,r)}}});a.registerHelper("fold","import",function(n,g){function h(d){var e,c,f,g;if(d<n.firstLine()||d>n.lastLine()||(e=
n.getTokenAt(a.Pos(d,1)),/\S/.test(e.string)||(e=n.getTokenAt(a.Pos(d,e.end+1))),"keyword"!=e.type||"import"!=e.string))return null;c=d;for(d=Math.min(n.lastLine(),d+10);c<=d;++c)if(f=n.getLine(c),g=f.indexOf(";"),-1!=g)return{startCh:e.end,end:a.Pos(c,g)}}g=g.line;var e=h(g),f,k;if(!e||h(g-1)||(f=h(g-2))&&f.end.line==g-1)return null;for(f=e.end;k=h(f.line+1),null!=k;)f=k.end;return{from:n.clipPos(a.Pos(g,e.startCh+1)),to:f}});a.registerHelper("fold","include",function(n,g){function h(d){if(d<n.firstLine()||
d>n.lastLine())return null;var e=n.getTokenAt(a.Pos(d,1));return/\S/.test(e.string)||(e=n.getTokenAt(a.Pos(d,e.end+1))),"meta"==e.type&&"#include"==e.string.slice(0,8)?e.start+8:void 0}g=g.line;var e=h(g),f,k;if(null==e||null!=h(g-1))return null;for(f=g;k=h(f+1),null!=k;)++f;return{from:a.Pos(g,e+1),to:n.clipPos(a.Pos(f))}})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){a.registerGlobalHelper("fold","comment",function(a){return a.blockCommentStart&&a.blockCommentEnd},function(n,g){var h=n.getModeAt(g),e=h.blockCommentStart,h=h.blockCommentEnd,f,k,d,p,c,q,l,b,r,m,t;if(e&&h){f=g.line;k=n.getLine(f);p=g.ch;for(c=0;;)if(d=0>=p?-1:k.lastIndexOf(e,p-1),-1==d){if(1==c)return;
c=1;p=k.length}else{if(1==c&&d<g.ch)return;if(/comment/.test(n.getTokenTypeAt(a.Pos(f,d+1)))){d+=e.length;break}p=d-1}k=1;p=n.lastLine();c=f;a:for(;c<=p;++c)for(b=n.getLine(c),r=c==f?d:0;m=b.indexOf(e,r),t=b.indexOf(h,r),0>m&&(m=b.length),0>t&&(t=b.length),r=Math.min(m,t),r!=b.length;){if(r==m)++k;else if(!--k){q=c;l=r;break a}++r}if(null!=q&&(f!=q||l!=d))return{from:a.Pos(f,d),to:a.Pos(q,l)}}})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){a.registerHelper("fold","indent",function(n,g){var h=n.getOption("tabSize"),e=n.getLine(g.line),f,k,d,p;if(/\S/.test(e)){var c=a.countColumn(e,null,h),q=null;f=g.line+1;for(k=n.lastLine();f<=k;++f)if(d=n.getLine(f),p=a.countColumn(d,null,h),p>c)q=f;else if(/\S/.test(d))break;if(q)return{from:a.Pos(g.line,
e.length),to:a.Pos(q,n.getLine(q).length)}}})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function n(b,a,c,d){this.line=a;this.ch=c;this.cm=b;this.text=b.getLine(a);this.min=d?d.from:b.firstLine();this.max=d?d.to-1:b.lastLine()}function g(b,a){var c=b.cm.getTokenTypeAt(q(b.line,a));return c&&/\btag\b/.test(c)}function h(b){if(!(b.line>=b.max))return b.ch=0,b.text=b.cm.getLine(++b.line),!0}
function e(b){if(!(b.line<=b.min))return b.text=b.cm.getLine(--b.line),b.ch=b.text.length,!0}function f(b){for(var a,c,d;;){if(a=b.text.indexOf("\x3e",b.ch),-1==a)if(h(b))continue;else break;if(g(b,a+1))return c=b.text.lastIndexOf("/",a),d=-1<c&&!/\S/.test(b.text.slice(c+1,a)),b.ch=a+1,d?"selfClose":"regular";b.ch=a+1}}function k(b){for(var a,c;;){if(a=b.ch?b.text.lastIndexOf("\x3c",b.ch-1):-1,-1==a)if(e(b))continue;else break;if(!g(b,a+1))b.ch=a;else if(l.lastIndex=a,b.ch=a,c=l.exec(b.text),c&&c.index==
a)return c}}function d(b){for(;;){l.lastIndex=b.ch;var a=l.exec(b.text);if(!a)if(h(b))continue;else break;if(g(b,a.index+1))return b.ch=a.index+a[0].length,a;b.ch=a.index+1}}function p(b,a){for(var c=[],e;;){var g=d(b),k,l=b.line,h=b.ch-(g?g[0].length:0);if(!g||!(k=f(b)))break;if("selfClose"!=k)if(g[1]){for(e=c.length-1;0<=e;--e)if(c[e]==g[2]){c.length=e;break}if(0>e&&(!a||a==g[2]))return{tag:g[2],from:q(l,h),to:q(b.line,b.ch)}}else c.push(g[2])}}function c(b,a){for(var c=[],d,f;;){var l;a:{l=b;for(var h=
void 0,n=f=void 0;;){if(h=l.ch?l.text.lastIndexOf("\x3e",l.ch-1):-1,-1==h)if(e(l))continue;else{l=void 0;break a}if(g(l,h+1)){l=(f=l.text.lastIndexOf("/",h),n=-1<f&&!/\S/.test(l.text.slice(f+1,h)),l.ch=h+1,n?"selfClose":"regular");break a}else l.ch=h}}if(d=l,!d)break;if("selfClose"==d)k(b);else{n=b.line;l=b.ch;h=k(b);if(!h)break;if(h[1])c.push(h[2]);else{for(f=c.length-1;0<=f;--f)if(c[f]==h[2]){c.length=f;break}if(0>f&&(!a||a==h[2]))return{tag:h[2],from:q(b.line,b.ch),to:q(n,l)}}}}}var q=a.Pos,l=
RegExp("\x3c(/?)([A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*)","g");a.registerHelper("fold","xml",function(b,a){for(var c=new n(b,a.line,0),e,g,l;e=d(c),
e&&c.line==a.line&&(g=f(c));)if(!e[1]&&"selfClose"!=g)return a=q(c.line,c.ch),l=p(c,e[2]),l&&{from:a,to:l.from}});a.findMatchingTag=function(a,d,e){var g=new n(a,d.line,d.ch,e),l;if(-1!=g.text.indexOf("\x3e")||-1!=g.text.indexOf("\x3c")){var h=f(g),y=h&&q(g.line,g.ch),C=h&&k(g);if(h&&C&&!(0<(g.line-d.line||g.ch-d.ch)))return(l={from:q(g.line,g.ch),to:y,tag:C[2]},"selfClose"==h)?{open:l,close:null,at:"open"}:C[1]?{open:c(g,C[2]),close:l,at:"close"}:(g=new n(a,y.line,y.ch,e),{open:l,close:p(g,C[2]),
at:"open"})}};a.findEnclosingTag=function(a,d,e){for(var f=new n(a,d.line,d.ch,e),g,l,h;g=c(f),g;)if(l=new n(a,d.line,d.ch,e),h=p(l,g.tag),h)return{open:g,close:h}};a.scanForClosingTag=function(a,c,d,e){a=new n(a,c.line,c.ch,e?{from:0,to:e}:null);return p(a,d)}});
(function(){CodeMirror.defineExtension("autoFormatAll",function(a,n){for(var g,h=this,e=h.getMode(),f=h.getRange(a,n).split("\n"),k=CodeMirror.copyState(e,h.getTokenAt(a).state),d=h.getOption("tabSize"),p="",c=0,q=0==a.ch,l=0;l<f.length;++l){for(g=new CodeMirror.StringStream(f[l],d);!g.eol();){var b=CodeMirror.innerMode(e,k),r=e.token(g,k),m=g.current();g.start=g.pos;(!q||/\S/.test(m))&&(p+=m,q=!1);!q&&b.mode.newlineAfterToken&&b.mode.newlineAfterToken(r,m,g.string.slice(g.pos)||f[l+1]||"",b.state)&&
(p+="\n",q=!0,++c)}!g.pos&&e.blankLine&&e.blankLine(k);!q&&l<f.length-1&&(p+="\n",q=!0,++c)}h.operation(function(){h.replaceRange(p,a,n);for(var b=a.line+1,d=a.line+c;b<=d;++b)h.indentLine(b,"smart");h.setCursor({line:0,ch:0})})})})();
(function(){function a(a){for(var g,h,e=[/for\s*?\((.*?)\)/g,/&#?[a-z0-9]+;[\s\S]/g,/\"(.*?)((\")|$)/g,/\/\*(.*?)(\*\/|$)/g,/^\/\/.*/g],f=[],k=0;k<e.length;k++)for(g=0;g<a.length;)if(h=a.substr(g).match(e[k]),null!=h)f.push({start:g+h.index,end:g+h.index+h[0].length}),g+=h.index+Math.max(1,h[0].length);else break;return f.sort(function(a,e){return a.start-e.start}),f}CodeMirror.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(a,g){return/^[;{}]$/.test(g)}});CodeMirror.extendMode("javascript",
{commentStart:"/*",commentEnd:"*/",wordWrapChars:[";","\\{","\\}"],autoFormatLineBreaks:function(n){var g=0,h=this.jsonMode?function(a){return a.replace(/([,{])/g,"$1\n").replace(/}/g,"\n}")}:function(a){return a.replace(/(;|\{|\})([^\r\n;])/g,"$1\n$2")},e=a(n),f="",k;if(null!=e){for(k=0;k<e.length;k++)e[k].start>g&&(f+=h(n.substring(g,e[k].start)),g=e[k].start),e[k].start<=g&&e[k].end>=g&&(f+=n.substring(g,e[k].end),g=e[k].end);g<n.length&&(f+=h(n.substr(g)))}else f=h(n);return f.replace(/^\n*|\n*$/,
"")}});CodeMirror.extendMode("xml",{commentStart:"\x3c!--",commentEnd:"--\x3e",noBreak:!1,noBreakEmpty:null,tagType:"",tagName:"",isXML:!1,newlineAfterToken:function(a,g,h){var e=!1,f=null,k="",d;if(this.isXML="xml"==this.configuration?!0:!1,"comment"==a||/\x3c!--/.test(h))return!1;if("tag"==a){if(0==g.indexOf("\x3c")&&0==!g.indexOf("\x3c/")&&(this.tagType="open",f=g.match(/^<\s*?([\w]+?)$/i),this.tagName=null!=f?f[1]:"",k=this.tagName.toLowerCase(),-1!="|label|li|option|textarea|title|a|b|bdi|bdo|big|center|cite|del|em|font|i|img|ins|s|small|span|strike|strong|sub|sup|u|".indexOf("|"+
k+"|")&&(this.noBreak=!0)),0==g.indexOf("\x3e")&&"open"==this.tagType)return(this.tagType="",d=this.isXML?"[^\x3c]*?":"",RegExp("^"+d+"\x3c/s*?"+this.tagName+"s*?\x3e","i").test(h))?(this.noBreak=!1,this.isXML||(this.tagName=""),!1):(e=this.noBreak,this.noBreak=!1,e?!1:!0);if(0==g.indexOf("\x3c/")&&(this.tagType="close",f=g.match(/^<\/\s*?([\w]+?)$/i),null!=f&&(k=f[1].toLowerCase()),-1!="|a|b|bdi|bdo|big|center|cite|del|em|font|i|img|ins|s|small|span|strike|strong|sub|sup|u|".indexOf("|"+k+"|")&&
(this.noBreak=!0)),0==g.indexOf("\x3e")&&"close"==this.tagType)return(this.tagType="",0==h.indexOf("\x3c")&&(f=h.match(/^<\/?\s*?([\w]+?)(\s|>)/i),k=null!=f?f[1].toLowerCase():"",-1=="|label|li|option|textarea|title|a|b|bdi|bdo|big|center|cite|del|em|font|i|img|ins|s|small|span|strike|strong|sub|sup|u|".indexOf("|"+k+"|")))?(this.noBreak=!1,!0):(e=this.noBreak,this.noBreak=!1,e?!1:!0)}return 0==h.indexOf("\x3c")?(this.noBreak=!1,this.isXML&&""!=this.tagName)?(this.tagName="",!1):(f=h.match(/^<\/?\s*?([\w]+?)(\s|>)/i),
k=null!=f?f[1].toLowerCase():"",-1!="|label|li|option|textarea|title|a|b|bdi|bdo|big|center|cite|del|em|font|i|img|ins|s|small|span|strike|strong|sub|sup|u|".indexOf("|"+k+"|")?!1:!0):!1}});CodeMirror.defineExtension("commentRange",function(a,g,h){var e=this,f=CodeMirror.innerMode(e.getMode(),e.getTokenAt(g).state).mode;e.operation(function(){if(a)e.replaceRange(f.commentEnd,h),e.replaceRange(f.commentStart,g),g.line==h.line&&g.ch==h.ch&&e.setCursor(g.line,g.ch+f.commentStart.length);else{var k=e.getRange(g,
h),d=k.indexOf(f.commentStart),p=k.lastIndexOf(f.commentEnd);-1<d&&-1<p&&p>d&&(k=k.substr(0,d)+k.substring(d+f.commentStart.length,p)+k.substr(p+f.commentEnd.length));e.replaceRange(k,g,h)}})});CodeMirror.defineExtension("autoIndentRange",function(a,g){var h=this;this.operation(function(){for(var e=a.line;e<=g.line;e++)h.indentLine(e,"smart")})});CodeMirror.defineExtension("autoFormatRange",function(a,g){for(var h,e=this,f=e.getMode(),k=e.getRange(a,g).split("\n"),d=CodeMirror.copyState(f,e.getTokenAt(a).state),
p=e.getOption("tabSize"),c="",q=0,l=0==a.ch,b=0;b<k.length;++b){for(h=new CodeMirror.StringStream(k[b],p);!h.eol();){var r=CodeMirror.innerMode(f,d),m=f.token(h,d),t=h.current();h.start=h.pos;(!l||/\S/.test(t))&&(c+=t,l=!1);!l&&r.mode.newlineAfterToken&&r.mode.newlineAfterToken(m,t,h.string.slice(h.pos)||k[b+1]||"",r.state)&&(c+="\n",l=!0,++q)}!h.pos&&f.blankLine&&f.blankLine(d);!l&&b<k.length-1&&(c+="\n",l=!0,++q)}e.operation(function(){e.replaceRange(c,a,g);for(var b=a.line+1,d=a.line+q;b<=d;++b)e.indentLine(b,
"smart");e.setSelection(a,e.getCursor(!1))})})})();
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function n(a){for(var e=0;e<a.state.activeLines.length;e++)a.removeLineClass(a.state.activeLines[e],"wrap",f),a.removeLineClass(a.state.activeLines[e],"background",k)}function g(a,e){if(a.length!=e.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!=e[c])return!1;return!0}function h(a,e){for(var c,h,l=
[],b=0;b<e.length;b++)(c=e[b],c.empty())&&(h=a.getLineHandleVisualStart(c.head.line),l[l.length-1]!=h&&l.push(h));g(a.state.activeLines,l)||a.operation(function(){n(a);for(var b=0;b<l.length;b++)a.addLineClass(l[b],"wrap",f),a.addLineClass(l[b],"background",k);a.state.activeLines=l})}function e(a,e){h(a,e.ranges)}var f="CodeMirror-activeline",k="CodeMirror-activeline-background";a.defineOption("styleActiveLine",!1,function(d,f,c){c=c&&c!=a.Init;f&&!c?(d.state.activeLines=[],h(d,d.listSelections()),
d.on("beforeSelectionChange",e)):!f&&c&&(d.off("beforeSelectionChange",e),n(d),delete d.state.activeLines)})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function n(a){"object"==typeof a&&(this.minChars=a.minChars,this.style=a.style,this.showToken=a.showToken,this.delay=a.delay,this.wordsOnly=a.wordsOnly);null==this.style&&(this.style=k);null==this.minChars&&(this.minChars=f);null==this.delay&&(this.delay=d);null==this.wordsOnly&&(this.wordsOnly=p);this.overlay=
this.timeout=null}function g(a){var e=a.state.matchHighlighter;clearTimeout(e.timeout);e.timeout=setTimeout(function(){h(a)},e.delay)}function h(a){a.operation(function(){var d=a.state.matchHighlighter,f,b,g;if(d.overlay&&(a.removeOverlay(d.overlay),d.overlay=null),!a.somethingSelected()&&d.showToken){f=!0===d.showToken?/[\w$]/:d.showToken;g=a.getCursor();b=a.getLine(g.line);for(var h=g=g.ch;g&&f.test(b.charAt(g-1));)--g;for(;h<b.length&&f.test(b.charAt(h));)++h;g<h&&a.addOverlay(d.overlay=e(b.slice(g,
h),f,d.style))}else{var k;if((k=(f=a.getCursor("from"),b=a.getCursor("to"),f.line==b.line))&&!(k=!d.wordsOnly)){var n;k=null!==a.getRange(f,b).match(/^\w+$/)?0<f.ch&&(h={line:f.line,ch:f.ch-1},n=a.getRange(h,f),null===n.match(/\W/))?!1:b.ch<a.getLine(f.line).length&&(h={line:b.line,ch:b.ch+1},n=a.getRange(b,h),null===n.match(/\W/))?!1:!0:!1}k&&(g=a.getRange(f,b).replace(/^\s+|\s+$/g,""),g.length>=d.minChars&&a.addOverlay(d.overlay=e(g,!1,d.style)))}})}function e(a,d,e){return{token:function(b){var f;
if(f=b.match(a))(f=!d)||(f=(!b.start||!d.test(b.string.charAt(b.start-1)))&&(b.pos==b.string.length||!d.test(b.string.charAt(b.pos))));if(f)return e;b.next();b.skipTo(a.charAt(0))||b.skipToEnd()}}}var f=2,k="matchhighlight",d=100,p=!1;a.defineOption("highlightSelectionMatches",!1,function(c,d,e){e&&e!=a.Init&&((e=c.state.matchHighlighter.overlay)&&c.removeOverlay(e),clearTimeout(c.state.matchHighlighter.timeout),c.state.matchHighlighter=null,c.off("cursorActivity",g));d&&(c.state.matchHighlighter=
new n(d),h(c),c.on("cursorActivity",g))})});